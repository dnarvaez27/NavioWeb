(window.webpackJsonpfront=window.webpackJsonpfront||[]).push([[0],{15:function(e,t,n){e.exports=n(34)},20:function(e,t,n){},22:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),u=(n(20),n(3)),i=n.n(u),s=n(9),l=n(11),f=(n(22),n(4)),p=n(5),m=n(7),d=n(6),h=n(8),v=n(14),b=n.n(v),j=(n(29),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).nRef=r.a.createRef(),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.nv=b()(this.nRef.current)}},{key:"componentDidUpdate",value:function(){this.nv.data(this.props.data),this.nv.addAllAttribs()}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.nRef})}}]),t}(r.a.Component)),O=n(10),w=(n(30),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={count:0,dataSize:0},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"updateCount",value:function(e,t){this.setState({count:e,dataSize:t})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("span",null,"Loaded ".concat(this.state.count," Pages")),r.a.createElement("span",null,"We have reached ".concat(this.state.dataSize," entries")))}}]),t}(r.a.Component)),E=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).counterRef=r.a.createRef(),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"update",value:function(e){var t=this;Object(s.a)(i.a.mark((function n(){var a,r,c,o,u,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=0,r=function(){var t=Object(s.a)(i.a.mark((function t(n,a){var r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e,"?$limit=").concat(n,"&$offset=").concat(a));case 2:return r=t.sent,t.next=5,r.json();case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),c=[],o=[0],u=1,l=function(){return new Promise((function(e,n){setTimeout(Object(s.a)(i.a.mark((function s(){return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r(1e3,a);case 2:o=i.sent,Array.isArray(o)?(JSON.stringify(o)===JSON.stringify(c)&&(o=[]),a+=1e3,c=[].concat(Object(O.a)(c),Object(O.a)(o)),t.counterRef.current.updateCount(u++,c.length),e()):n(new Error("Data is not array"));case 4:case"end":return i.stop()}}),s)}))),100)}))};case 6:if(0===o.length){n.next=18;break}return n.prev=7,n.next=10,l();case 10:n.next=16;break;case 12:return n.prev=12,n.t0=n.catch(7),console.error(n.t0),n.abrupt("break",18);case 16:n.next=6;break;case 18:t.props.onFetchDone(!0,c);case 19:case"end":return n.stop()}}),n,null,[[7,12]])})))()}},{key:"render",value:function(){return r.a.createElement("div",{id:"fetcher"},r.a.createElement(w,{ref:this.counterRef,limit:1e3}))}}]),t}(r.a.Component),g=(n(31),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,urls:[]},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(s.a)(i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("","/api/urls"));case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,e.setState({urls:a});case 7:case"end":return t.stop()}}),t)})))()}},{key:"dateToString",value:function(e){var t=function(e,t){return Array(t+1-e.toString().length).join("0")+e},n=new Date(e);return"".concat(n.getFullYear(),"-").concat(t(n.getMonth(),2),"-").concat(t(n.getDate(),2)," ").concat(t(n.getHours(),2),":").concat(t(n.getMinutes(),2),":").concat(t(n.getSeconds(),2))}},{key:"goToUrl",value:function(e){var t=this;return function(){t.props.goToUrl(e)(),t.setState((function(t){return{open:!1,urls:[{url:e,timestamp:(new Date).getTime()}].concat(Object(O.a)(t.urls))}}))}}},{key:"addUrl",value:function(e){this.setState((function(t){return{urls:[{url:e,timestamp:(new Date).getTime()}].concat(Object(O.a)(t.urls))}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{id:"sidebar-opener",onClick:function(){return e.setState({open:!0})}},r.a.createElement("i",{className:"fas fa-bars"})),r.a.createElement("div",{id:"sidebar",className:this.state.open?"":"hidden"},r.a.createElement("button",{onClick:function(){return e.setState({open:!1})}},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("div",{id:"urls-container"},this.state.urls.sort((function(e,t){return t.timestamp-e.timestamp})).map((function(t,n){return r.a.createElement("div",{className:"url-item",onClick:e.goToUrl(t.url),key:n},r.a.createElement("span",null,t.url),r.a.createElement("span",null,e.dateToString(t.timestamp)))})))))}}]),t}(r.a.Component)),k=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(void 0),u=Object(l.a)(o,2),f=u[0],p=u[1],m=Object(a.useState)({show:!1,text:""}),d=Object(l.a)(m,2),h=d[0],v=d[1],b={ref:r.a.createRef,value:""},O=r.a.createRef(),w=r.a.createRef();Object(a.useEffect)((function(){O.current&&O.current.update(f)}),[O,f]),Object(a.useEffect)((function(){h.show&&setTimeout((function(){return v({show:!1,text:h.text})}),2e3)}),[h]);var k=function(e){Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("","/api/urls"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({url:e,timestamp:(new Date).getTime()})});case 2:case"end":return t.stop()}}),t)})))()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];b.value?(c(void 0),p(b.value),k(b.value),e&&w.addUrl(b.value)):v({show:!0,text:"No URL typed"})};return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Navio URL Dataset explorer"),r.a.createElement("div",{id:"header"},r.a.createElement("input",{ref:b.ref,onChange:function(e){return b.value=e.target.value},onKeyPress:function(e){return"Enter"===e.key&&y()},id:"url-input"}),r.a.createElement("button",{onClick:function(){y(!0)}},"Send")),r.a.createElement(g,{goToUrl:function(e){return function(){b.value=e,y()}},ref:function(e){return w=e}}),f?r.a.createElement(E,{onFetchDone:function(e,t){p(void 0),c(t)},url:f,ref:O}):0!==(n&&n.length)?r.a.createElement(j,{data:n}):r.a.createElement("div",{id:"info-empty"},r.a.createElement("span",null,"Enter a Dataset URL to visualize and explore it!")),r.a.createElement("div",{id:"toast",className:h.show?"shown":""},h.text))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.e9fb16ab.chunk.js.map